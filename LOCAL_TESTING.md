# üß™ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ.

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (–±–µ–∑ Telegram –±–æ—Ç–∞)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pnpm install

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp env.example .env

# –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–æ–≤
pnpm dev
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# API Health Check
curl http://localhost:3001/health

# Web App
open http://localhost:3000
```

**–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{"status":"ok"}`
- ‚úÖ Web App –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω" (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –±–µ–∑ Telegram)

## ü§ñ –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Telegram

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞

```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
# –û—Ç–ø—Ä–∞–≤—å—Ç–µ @BotFather –∫–æ–º–∞–Ω–¥—É: /newbot

# 2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ .env
BOT_TOKEN=1234567890:AABBCCDDEEFFgghhiijjkkllmmnnooppqqr

# 3. –î–æ–±–∞–≤—å—Ç–µ webhook secret
WEBHOOK_SECRET=your_random_secret_32_characters
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase

```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ https://supabase.com
# 2. –î–æ–±–∞–≤—å—Ç–µ –≤ .env:
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
pnpm --filter api db:migrate
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å ngrok

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
# https://ngrok.com/download

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
pnpm dev

# –í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ ngrok
ngrok http 3001

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: https://abc123.ngrok.io)
# –û–±–Ω–æ–≤–∏—Ç–µ .env:
WEBHOOK_URL=https://abc123.ngrok.io/webhook

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ webhook
curl -X POST "http://localhost:3001/api/webhook/set"
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞

–û—Ç–ø—Ä–∞–≤—å—Ç–µ @BotFather —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:

```
/setcommands
start - –ó–∞–ø—É—Å—Ç–∏—Ç—å Mini App

/setmenubutton
url - https://abc123.ngrok.io
text - –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É `/start`**
   - –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ "üöÄ –û—Ç–∫—Ä—ã—Ç—å Mini App"

2. **–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É Mini App**
   - –î–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –û—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
   - –ö–Ω–æ–ø–∫–∞ "üèì Ping API" –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ API**
   - –ù–∞–∂–º–∏—Ç–µ "üèì Ping API"
   - –î–æ–ª–∂–µ–Ω –ø—Ä–∏–π—Ç–∏ –æ—Ç–≤–µ—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

## üê≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Docker

### 1. –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
docker-compose -f docker-compose.dev.yml build

# –ó–∞–ø—É—Å–∫ –≤ Docker
docker-compose -f docker-compose.dev.yml up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker-compose -f docker-compose.dev.yml logs -f
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# API Health Check
curl http://localhost:3001/health

# Web App
open http://localhost:3000
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# API –ª–æ–≥–∏
pnpm --filter api dev

# Web –ª–æ–≥–∏
pnpm --filter web dev

# Docker –ª–æ–≥–∏
docker-compose -f docker-compose.dev.yml logs api
docker-compose -f docker-compose.dev.yml logs web
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–π
pnpm --filter api db:status

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
pnpm --filter api db:seed
```

### –û—Ç–ª–∞–¥–∫–∞ webhook

```bash
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ webhook
curl http://localhost:3001/api/webhook/info

# –£–¥–∞–ª–µ–Ω–∏–µ webhook (–¥–ª—è —Å–±—Ä–æ—Å–∞)
curl -X DELETE "http://localhost:3001/api/webhook"

# –ü–æ–≤—Ç–æ—Ä–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
curl -X POST "http://localhost:3001/api/webhook/set"
```

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
pnpm type-check

# –õ–∏–Ω—Ç–∏–Ω–≥
pnpm lint

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
pnpm format

# –°–±–æ—Ä–∫–∞
pnpm build

# –û—á–∏—Å—Ç–∫–∞
pnpm clean
```

### –û—Ç–ª–∞–¥–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
./scripts/check-project.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
cat .env

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
lsof -i :3000  # Web
lsof -i :3001  # API
```

## üö® –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ü–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã

```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞ –ø–æ—Ä—Ç–∞—Ö
lsof -i :3000
lsof -i :3001

# –£–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
kill -9 <PID>
```

### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å pnpm

```bash
# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
pnpm store prune

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞
rm -rf node_modules pnpm-lock.yaml
pnpm install
```

### 3. –û—à–∏–±–∫–∏ TypeScript

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
pnpm type-check

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏—è
rm -rf apps/*/dist
pnpm build
```

### 4. Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ ngrok –∑–∞–ø—É—â–µ–Ω
curl https://your-ngrok-url.ngrok.io/health

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook –≤ Telegram
curl http://localhost:3001/api/webhook/info

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ webhook
curl -X POST "http://localhost:3001/api/webhook/set"
```

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [ ] Node.js 18+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] pnpm —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`pnpm install`)
- [ ] `.env` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Supabase –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω
- [ ] Telegram –±–æ—Ç —Å–æ–∑–¥–∞–Ω
- [ ] ngrok –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] API –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `/health`
- [ ] Web app –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] Telegram –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `/start`
- [ ] Mini App –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ Telegram
- [ ] API ping —Ä–∞–±–æ—Ç–∞–µ—Ç

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –≤—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å:

1. **Telegram –±–æ—Ç**, –∫–æ—Ç–æ—Ä—ã–π:
   - ‚úÖ –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É `/start`
   - ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É "üöÄ –û—Ç–∫—Ä—ã—Ç—å Mini App"

2. **Mini App**, –∫–æ—Ç–æ—Ä–æ–µ:
   - ‚úÖ –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ Telegram
   - ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
   - ‚úÖ –£—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç ping API
   - ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ Supabase

3. **API**, –∫–æ—Ç–æ—Ä–æ–µ:
   - ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç health status
   - ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç webhook –æ—Ç Telegram
   - ‚úÖ –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç initData
   - ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

---

**üéâ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ production –¥–µ–ø–ª–æ—é!**

–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: [Production –¥–µ–ø–ª–æ–π](.github/DEPLOYMENT.md)
